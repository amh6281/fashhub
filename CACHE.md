# Next.js 캐싱 전략

Next.js에서는 성능 최적화를 위해 다양한 캐싱 전략을 제공합니다.  
최대한 빌드 타임에 최적화를 수행하여 성능을 향상시키는 것이 중요합니다.

---

## 1. Request Memoization (요청 메모이제이션)

- Next.js는 **같은 요청을 여러 번 보내지 않고 한 번만 보내도록 최적화**되어 있음.
- 즉, 한 페이지를 **처음 렌더링할 때 중복된 요청을 제거**함.
- 이후에는 새로운 요청을 보내므로 **revalidating(갱신) 불필요**.
- **한 페이지에서만 효율적인 캐시 시스템**.

### 🛠 관련 개념

| 개념             | 설명                                               |
| ---------------- | -------------------------------------------------- |
| **duration**     | 캐시 지속 시간                                     |
| **revalidating** | 언제 캐시를 무효화하고 데이터를 다시 갱신할지 설정 |
| **opting out**   | 캐시를 사용하지 않도록 설정 (`cache: 'no-store'`)  |

---

## 2. Data Cache (데이터 캐시)

프론트엔드 서버에서 **백엔드로 요청을 보낼 때 응답을 일정 기간 동안 캐싱**할 수 있음.

### 📌 캐싱 옵션

| 옵션                         | 설명                                           |
| ---------------------------- | ---------------------------------------------- |
| `cache: 'no-store'`          | 캐싱 없이 항상 새로운 요청을 보냄              |
| `cache: 'force-cache'`       | 강제로 캐싱하여 요청 수를 줄임                 |
| `next: { revalidate: 3600 }` | 3600초(1시간)마다 데이터를 갱신                |
| `revalidatePath('/home')`    | 특정 경로(`/home`)의 캐시만 갱신               |
| `revalidateTag('user-data')` | 특정 태그(`user-data`)가 변경될 때만 캐시 갱신 |

### 🔥 캐시 지속 시간

- 새로고침을 해도 **캐시가 유지됨** (`no-store`가 아닌 경우).
- **적절한 `revalidate` 설정이 필수**.

---

## 3. 정리

1. **Request Memoization**

   - 동일한 요청을 한 번만 보내도록 최적화됨.
   - 한 페이지에서만 캐시가 유지됨.
   - 페이지를 벗어나면 새로운 요청이 발생함.

2. **Data Cache**

   - 서버에서 받아온 데이터를 일정 기간 캐싱 가능.
   - `cache: 'no-store'` → 항상 최신 데이터 요청.
   - `revalidate`를 적절히 설정하여 캐시 갱신 가능.

3. **캐시 설정 방법**
   - `next: { revalidate: 시간 }` → 자동으로 데이터 갱신.
   - `revalidatePath(경로)` → 특정 경로만 갱신.
   - `revalidateTag(태그)` → 특정 데이터만 갱신.

효율적인 캐싱 전략을 활용하면 **불필요한 네트워크 요청을 줄이고 성능을 최적화**할 수 있습니다. 🚀
